name: Release Drafter

on:
  workflow_dispatch: {}
  push:
    branches:
      - main

concurrency:
  group: release-drafter
  cancel-in-progress: false

jobs:
  draft_release:
    name: Draft Release
    permissions:
      contents: write
      pull-requests: write
    runs-on: ubuntu-latest
    steps:
      - name: Create or update draft release
        uses: aaronsteers/semantic-pr-release-drafter@v0
        id: release-drafter
        with:
          categories: |
            - title: 'ğŸš€ New Features'
              commit-types:
                - 'feat'
              display-order: 100
            - title: 'ğŸ› Bug Fixes'
              commit-types:
                - 'fix'
              display-order: 101
            - title: 'âš™ï¸ Under the Hood'
              commit-types:
                - 'chore'
                - 'ci'
                - 'build'
                - 'refactor'
                - 'test'
                - 'perf'
                - 'docs'
              collapse-after: 3
              display-order: 999
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
